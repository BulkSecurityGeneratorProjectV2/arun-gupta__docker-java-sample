{  
  "id":"/webapp",
  "groups":[  
    {  
      "id":"db-group",
      "apps":[  
        {  
          "id":"db",
          "cpus":4,
          "mem":4096,
          "instances":1,
          "container":{  
            "type":"DOCKER",
            "docker":{  
              "image":"arungupta/couchbase:travel",
              "network":"USER",
              "portMappings":[  
                {  
                  "containerPort":8091,
                  "protocol":"tcp",
                  "name":"admin",
                  "servicePort":8091,
                  "labels":{  
                    "VIP_0":"/db:8091"
                  }
                },
                {  
                  "containerPort":8092,
                  "protocol":"tcp",
                  "name":"xdcr",
                  "servicePort":8092,
                  "labels":{  
                    "VIP_0":"/db:8092"
                  }
                },
                {  
                  "containerPort":8093,
                  "protocol":"tcp",
                  "name":"query",
                  "servicePort":8093,
                  "labels":{  
                    "VIP_0":"/db:8093"
                  }
                },
                {  
                  "containerPort":11210,
                  "protocol":"tcp",
                  "name":"memcached",
                  "servicePort":11210,
                  "labels":{  
                    "VIP_0":"/db:11210"
                  }
                }
              ]
            }
          },
          "ipAddress":{  
            "networkName":"dcos"
          },
          "labels":{  
            "HAPROXY_0_VHOST":"DCOS-PublicSlaveLo-12LOS82TA7BGH-719211721.us-west-1.elb.amazonaws.com",
            "HAPROXY_GROUP":"external"
          }
        }
      ]
    },
    {  
      "id":"web-group",
      "dependencies": ["db-group"],
      "apps":[  
        {  
          "id":"web",
          "cpus":2,
          "mem":4096,
          "instances":1,
          "container":{  
            "type":"DOCKER",
            "docker":{  
              "image":"arungupta/wildfly-couchbase-javaee:travel",
              "network":"USER",
              "portMappings":[  
                {  
                  "hostPort":0,
                  "containerPort":8080,
                  "protocol":"tcp",
                  "labels":{  
                    "VIP_0":"/web:8080"
                  }
                }
              ]
            }
          },
          "ipAddress":{  
            "networkName":"dcos"
          },
          "env":{  
            "COUCHBASE_URI":"webapp.db-group.db.marathon.l4lb.thisdcos.directory"
          }
        }
      ]
    }
  ]
}
